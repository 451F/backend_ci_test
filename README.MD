# Backend PHP | Full stack dev test task v2

**`Перед тем как приступить,внимательно изучить данный файл!`**
#### Структура

В папке system: находиться ядро нашего CodeIgniter v3 - модифицированный. Некоторая информация находится в папке system/README.MD

В папке application : полный пример приложения - инстаграма. Main_page - контроллер - класс, где есть готовые Endpoints.

В нем существуют пути-методы: Как инициализировать обьект, получать данные и препарировать и отдавать на фронт. Пример класса комментариев, поста, юзера.
После установки вы увидите главную страницу где будет храниться информация которая поможет сделать задание.

Мы работаем всегда с моделями Emerald_model - наши ORM - OOP модели для работы с базой, связями и тд. Они представляют базу данных, работу с ней.
Вся логика также хранится в них. 




#### Инициализация
###### PHP 
Версии 7.1+ . Проверялось и составлялось на PHP7.3

###### NGinx

nginx/test_task.conf - в nginx conf.d или sites_available

###### Приложение
Изменить на ваши пути
public/index.php - **$application_folder**

config/database.php - **параметры базы**

###### MySQL

mysql/dump.sql - залить 

_Какие то мелочи могут не работать, например ( php - short_open_tags -> on). Фиксим вручную :)_ 

--------------------------
#### ЗАДАЧА

У нас уже сущуествует в нашем мини-инста список постов, и просмотрел информации о посте. Но вот не хватает чуть монетизации и юзабилити.

1 - Сделать авторизацию . Login model уже имеет наброски для работы с сессией. Достаточно сделать логин пароль авторизацию в базе данных. 
Для удобства пароль можно не шифровать, чтобы при проверке мы могли легко авторизироватся. 

`/main_page/login`

2 - Мы можем комментировать только пост.  Сделать вложенные комментарии. Их может быть беконченое кол-во вложенностей. 
Любыми способами на основе нашей текущей структуры переделать/улучшить/расширить возможность комментирования любого поста неограниченное колво раз.

`/main_page/comment`

3 - Сделать монетизацию. Уже есть готовый API-Endpoint по добавлению средств. На вход идет кол-во валюты. У юзера есть в базе есть уже `wallet_balance` которая отвечает за баланс.
`wallet_total_refilled` - сколько человек пополнил за все время и `wallet_total_withdrawn` сколько он потратил (вывел в лайки).
Последние два поля должны считать все действия по счету пользователя сколько он за все время пополнил или потратил. Валюта - USD - $. 

`/main_page/add_money`



2.1 - Так как в мире самым популярным способом монетизации игр это покупка "Бустерпаков" - (сундук, ящик, кейс) с предметами\карточками\деньгами - 
предлогаю сделать эту максимально простую возможность для наших пользователей :) 

`/main_page/buy_boosterpack`

Создать 3 бустерпака в которые будут стоить 5$ 20$ и 50$ . 

Пользователь, покупая данный пак, получает случайное N-ое кол-во лайков, которые может потрать на возможность лайка поста или комментария. 

**Формула:** Скоро будет.

3- Сделать возможность юзеру лайкать любой комментарий, и любой пост. Неограниченное кол-во раз. 

4 - Максимальная безопасность. Думаю, тут не нужно обьснять что мы должны записывать все действия с балансом ? :) 
Придумать отличную структуру, для того чтобы мы могли и построить графики, сделать выборки, анализировать действия пользоваталей в нашей с системе, 
особоенно когда работа с балансом.


Приметки: Пока нет.


Результат: работоспособность через CLI /  HTTP запрос методов описанных выше 


#### ДОП. ЗАДАЧА Vue.js | Frontend 

Пока не придумали.


